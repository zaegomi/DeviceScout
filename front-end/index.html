<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeviceScout - Network Security Made Simple</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5dc;
            min-height: 100vh;
        }

        .app-container {
            min-height: 100vh;
            background: #f5f5dc;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            background: #f5f5dc;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-image {
            width: 160px;
            height: 160px;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.2);
            transition: transform 0.3s ease;
        }

        .logo-image:hover {
            transform: scale(1.05);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a202c;
        }

        .logo-subtitle {
            font-size: 0.9rem;
            color: #64748b;
            font-weight: 500;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .nav-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #c1839f 0%, #a0647a 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(161, 100, 122, 0.3);
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(161, 100, 122, 0.4);
        }

        .nav-button.active {
            background: linear-gradient(135deg, #e53e3e 0%, #f56565 100%);
            box-shadow: 0 6px 20px rgba(229, 62, 62, 0.4);
        }

        .main-content {
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .start-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            text-align: center;
        }

        .scan-circle {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: linear-gradient(135deg, #c1839f 0%, #a0647a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 15px 35px rgba(161, 100, 122, 0.3);
        }

        .scan-circle:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(161, 100, 122, 0.4);
        }

        .scan-text {
            color: white;
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: white;
            border: 3px solid #2d3748;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .card-content {
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 15px;
        }

        .metric-value {
            font-size: 3rem;
            font-weight: 700;
            color: #e53e3e;
        }

        .metric-label {
            font-size: 1.1rem;
            color: #64748b;
            font-weight: 500;
        }

        .device-container {
            background: white;
            border: 3px solid #2d3748;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .device-title {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
        }

        .device-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .device-item {
            background: #f8f9fa;
            border: 2px solid #2d3748;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .device-item:hover {
            background: #e9ecef;
            transform: translateX(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-color: #e53e3e;
        }

        .device-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .device-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3748;
        }

        .security-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .security-critical {
            background: #fee;
            color: #c53030;
            border: 1px solid #feb2b2;
        }

        .security-high {
            background: #fef5e7;
            color: #d69e2e;
            border: 1px solid #f6e05e;
        }

        .security-medium {
            background: #f0fff4;
            color: #38a169;
            border: 1px solid #9ae6b4;
        }

        .security-low {
            background: #f7fafc;
            color: #4a5568;
            border: 1px solid #cbd5e0;
        }

        .device-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            color: #64748b;
            font-size: 0.9rem;
        }

        .device-info {
            display: flex;
            justify-content: space-between;
        }

        .security-container {
            background: white;
            border: 3px solid #2d3748;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .security-title {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 40px;
            text-align: center;
        }

        .security-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .security-score-card {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
        }

        .security-score {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .score-excellent { color: #38a169; }
        .score-good { color: #38a169; }
        .score-fair { color: #d69e2e; }
        .score-poor { color: #e53e3e; }
        .score-critical { color: #c53030; }

        .security-status {
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .vulnerability-section {
            margin-top: 40px;
        }

        .vulnerability-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .vulnerability-card {
            background: #fff5f5;
            border: 2px solid #fed7d7;
            border-radius: 15px;
            padding: 25px;
        }

        .vulnerability-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .vulnerability-list {
            list-style: none;
            padding: 0;
        }

        .vulnerability-item {
            background: white;
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #e53e3e;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .recommendation-card {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 15px;
            padding: 25px;
        }

        .recommendation-item {
            background: white;
            margin: 8px 0;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #38a169;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #2d3748;
        }

        .stat-label {
            color: #64748b;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Device Detail Page Styles */
        .device-detail-container {
            background: white;
            border: 3px solid #2d3748;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .device-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .device-detail-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
        }

        .back-button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #c1839f 0%, #a0647a 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(161, 100, 122, 0.4);
        }

        .device-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .device-info-section {
            background: #f8f9fa;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 25px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: #4a5568;
            flex: 1;
        }

        .info-value {
            color: #2d3748;
            font-weight: 500;
            flex: 2;
            text-align: right;
        }

        .security-detail-section {
            grid-column: 1 / -1;
            background: #fff5f5;
            border: 2px solid #fed7d7;
            border-radius: 15px;
            padding: 25px;
        }

        .security-score-large {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-right: 30px;
        }

        .score-critical-bg { background: linear-gradient(135deg, #c53030, #e53e3e); }
        .score-high-bg { background: linear-gradient(135deg, #d69e2e, #f6e05e); }
        .score-medium-bg { background: linear-gradient(135deg, #38a169, #9ae6b4); }
        .score-low-bg { background: linear-gradient(135deg, #4a5568, #cbd5e0); }

        .score-info {
            flex: 1;
        }

        .score-level {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .score-description {
            font-size: 1.1rem;
            color: #4a5568;
            line-height: 1.5;
        }

        .vulnerability-detail-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .vulnerability-detail-item {
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #e53e3e;
            font-size: 1rem;
            color: #4a5568;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .recommendation-detail-list {
            list-style: none;
            padding: 0;
            margin: 20px 0;
        }

        .recommendation-detail-item {
            background: white;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #38a169;
            font-size: 1rem;
            color: #4a5568;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .ports-section {
            margin-top: 20px;
        }

        .port-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .port-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            text-align: center;
            transition: all 0.3s ease;
        }

        .port-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .port-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2d3748;
        }

        .port-service {
            color: #64748b;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .port-risk {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 8px;
            display: inline-block;
        }

        .risk-critical {
            background: #fee;
            color: #c53030;
        }

        .risk-high {
            background: #fef5e7;
            color: #d69e2e;
        }

        .risk-medium {
            background: #f0fff4;
            color: #38a169;
        }

        .risk-low {
            background: #f7fafc;
            color: #4a5568;
        }

        .loading-animation {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #c1839f, #e53e3e);
            transition: width 0.3s ease;
        }

        .scan-progress {
            text-align: center;
            margin-top: 20px;
        }

        .scan-status {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                padding: 20px;
            }
            
            .nav-buttons {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .scan-circle {
                width: 250px;
                height: 250px;
            }
            
            .scan-text {
                font-size: 1.5rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .device-details {
                grid-template-columns: 1fr;
            }

            .security-overview {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function DeviceScout() {
            const [currentPage, setCurrentPage] = useState('start');
            const [isScanning, setIsScanning] = useState(false);
            const [scanProgress, setScanProgress] = useState(0);
            const [scanStatus, setScanStatus] = useState('');
            const [deviceCount, setDeviceCount] = useState(0);
            const [devices, setDevices] = useState([]);
            const [networkSecurity, setNetworkSecurity] = useState(null);
            const [vulnerabilityStats, setVulnerabilityStats] = useState(null);
            const [selectedDevice, setSelectedDevice] = useState(null);

            const handleScan = async () => {
                setIsScanning(true);
                setScanProgress(0);
                setScanStatus('Initializing scan...');
                
                try {
                    console.log('🔍 Starting enhanced network security scan...');
                    
                    // Simulate progress updates
                    const progressInterval = setInterval(() => {
                        setScanProgress(prev => {
                            const newProgress = Math.min(prev + Math.random() * 15, 90);
                            if (newProgress < 30) {
                                setScanStatus('Discovering devices...');
                            } else if (newProgress < 60) {
                                setScanStatus('Analyzing security vulnerabilities...');
                            } else if (newProgress < 90) {
                                setScanStatus('Checking for default passwords and open ports...');
                            }
                            return newProgress;
                        });
                    }, 1000);
                    
                    // Call enhanced backend API
                    const response = await fetch('http://localhost:3001/api/scan');
                    const data = await response.json();
                    
                    clearInterval(progressInterval);
                    setScanProgress(100);
                    setScanStatus('Scan completed!');
                    
                    if (data.success) {
                        console.log('✅ Enhanced scan completed:', data);
                        
                        // Update state with enhanced data
                        setDeviceCount(data.deviceCount);
                        setDevices(data.devices);
                        setNetworkSecurity(data.networkSecurity);
                        setVulnerabilityStats(data.vulnerabilityStats);
                        
                        console.log(`📱 Found ${data.deviceCount} devices`);
                        console.log(`🔒 Network Security Score: ${data.networkSecurity.score}/100`);
                        console.log(`⚠️ High Risk Devices: ${data.networkSecurity.highRiskDevices}`);
                    } else {
                        console.error('❌ Enhanced scan failed:', data.error);
                        alert('Enhanced scan failed: ' + data.error);
                    }
                } catch (error) {
                    console.error('❌ Network error:', error);
                    alert('Could not connect to backend. Make sure the server is running on http://localhost:3001');
                } finally {
                    setIsScanning(false);
                    setCurrentPage('dashboard');
                }
            };

            const navigateToPage = (page) => {
                setCurrentPage(page);
                // Clear selected device when navigating away from device detail
                if (page !== 'device-detail') {
                    setSelectedDevice(null);
                }
            };

            const viewDeviceDetail = (device) => {
                setSelectedDevice(device);
                setCurrentPage('device-detail');
            };

            const getSecurityScoreClass = (score) => {
                if (score >= 90) return 'score-excellent';
                if (score >= 70) return 'score-good';
                if (score >= 50) return 'score-fair';
                if (score >= 30) return 'score-poor';
                return 'score-critical';
            };

            const getSecurityStatusText = (score) => {
                if (score >= 90) return 'Excellent';
                if (score >= 70) return 'Good';
                if (score >= 50) return 'Fair';
                if (score >= 30) return 'Poor';
                return 'Critical';
            };

            return (
                <div className="app-container">
                    <header className="header">
                        <div className="logo-section">
                            <img src="logo.png" alt="DeviceScout Logo" className="logo-image" />
                        </div>
                        
                        {currentPage !== 'start' && (
                            <nav className="nav-buttons">
                                <button 
                                    className={`nav-button ${currentPage === 'dashboard' ? 'active' : ''}`}
                                    onClick={() => navigateToPage('dashboard')}
                                >
                                    Dashboard
                                </button>
                                <button 
                                    className={`nav-button ${currentPage === 'devices' ? 'active' : ''}`}
                                    onClick={() => navigateToPage('devices')}
                                >
                                    Devices
                                </button>
                                <button 
                                    className={`nav-button ${currentPage === 'security' ? 'active' : ''}`}
                                    onClick={() => navigateToPage('security')}
                                >
                                    Security
                                </button>
                                <button 
                                    className="nav-button"
                                    onClick={() => setCurrentPage('start')}
                                >
                                    New Scan
                                </button>
                            </nav>
                        )}
                    </header>

                    <main className="main-content">
                        {/* Start Page */}
                        <div className={`page ${currentPage === 'start' ? 'active' : ''}`}>
                            <div className="start-page">
                                <div className="scan-circle" onClick={handleScan}>
                                    <div className="scan-text">
                                        {isScanning ? (
                                            <>
                                                <div className="loading-animation"></div>
                                                <div style={{marginTop: '10px', fontSize: '1.2rem'}}>Scanning...</div>
                                            </>
                                        ) : (
                                            'Click to Scan'
                                        )}
                                    </div>
                                </div>
                                
                                {isScanning && (
                                    <div className="scan-progress">
                                        <div className="scan-status">{scanStatus}</div>
                                        <div className="progress-bar">
                                            <div 
                                                className="progress-fill" 
                                                style={{width: `${scanProgress}%`}}
                                            ></div>
                                        </div>
                                        <div style={{fontSize: '0.9rem', color: '#64748b'}}>
                                            {Math.round(scanProgress)}% Complete
                                        </div>
                                    </div>
                                )}
                                
                                {!isScanning && (
                                    <p style={{fontSize: '1.2rem', color: '#64748b', maxWidth: '600px'}}>
                                        Welcome to DeviceScout! Click the button above to start an enhanced security scan 
                                        that will discover devices, check for vulnerabilities, default passwords, and security risks.
                                    </p>
                                )}
                            </div>
                        </div>

                        {/* Dashboard Page */}
                        <div className={`page ${currentPage === 'dashboard' ? 'active' : ''}`}>
                            <div className="dashboard-grid">
                                <div className="dashboard-card">
                                    <h2 className="card-title">Total Devices</h2>
                                    <div className="card-content">
                                        <div className="metric-value">{deviceCount}</div>
                                        <div className="metric-label">Connected Devices</div>
                                        <div style={{fontSize: '0.9rem', color: '#38a169', marginTop: '10px'}}>
                                            ✓ All devices discovered
                                        </div>
                                    </div>
                                </div>

                                <div className="dashboard-card">
                                    <h2 className="card-title">Network Security</h2>
                                    <div className="card-content">
                                        <div className={`metric-value ${networkSecurity ? getSecurityScoreClass(networkSecurity.score) : ''}`}>
                                            {networkSecurity ? `${networkSecurity.score}/100` : '0/100'}
                                        </div>
                                        <div className="metric-label">Security Score</div>
                                        <div style={{fontSize: '0.9rem', marginTop: '10px'}}>
                                            {networkSecurity ? getSecurityStatusText(networkSecurity.score) : 'No data'}
                                        </div>
                                    </div>
                                </div>

                                <div className="dashboard-card">
                                    <h2 className="card-title">Risk Assessment</h2>
                                    <div className="card-content">
                                        <div className="metric-value" style={{color: '#e53e3e'}}>
                                            {networkSecurity ? networkSecurity.highRiskDevices : 0}
                                        </div>
                                        <div className="metric-label">High Risk Devices</div>
                                        <div style={{fontSize: '0.9rem', color: '#e53e3e', marginTop: '10px'}}>
                                            {networkSecurity && networkSecurity.criticalVulnerabilities > 0 
                                                ? `⚠ ${networkSecurity.criticalVulnerabilities} Critical Issues` 
                                                : '✓ No Critical Issues'}
                                        </div>
                                    </div>
                                </div>

                                <div className="dashboard-card">
                                    <h2 className="card-title">Vulnerability Stats</h2>
                                    <div className="card-content">
                                        {vulnerabilityStats ? (
                                            <div style={{fontSize: '1rem', color: '#2d3748', lineHeight: '1.6', textAlign: 'left'}}>
                                                <div>🔒 Critical: {vulnerabilityStats.securityLevels.Critical}</div>
                                                <div>⚠️ High: {vulnerabilityStats.securityLevels.High}</div>
                                                <div>📊 Medium: {vulnerabilityStats.securityLevels.Medium}</div>
                                                <div>✅ Low: {vulnerabilityStats.securityLevels.Low}</div>
                                                <div style={{marginTop: '10px', fontWeight: '600'}}>
                                                    Avg Risk: {vulnerabilityStats.averageRiskScore}/100
                                                </div>
                                            </div>
                                        ) : (
                                            <div>Run a scan to see vulnerability statistics</div>
                                        )}
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Devices Page */}
                        <div className={`page ${currentPage === 'devices' ? 'active' : ''}`}>
                            <div className="device-container">
                                <h2 className="device-title">Device Security Analysis</h2>
                                <div className="device-list">
                                    {devices.length > 0 ? (
                                        devices.map((device, index) => (
                                            <div 
                                                key={index} 
                                                className="device-item"
                                                onClick={() => viewDeviceDetail(device)}
                                            >
                                                <div className="device-header">
                                                    <div className="device-name">
                                                        {device.hostname !== 'Unknown' ? device.hostname : device.ip}
                                                    </div>
                                                    {device.security && (
                                                        <div className={`security-badge security-${device.security.securityLevel.toLowerCase()}`}>
                                                            {device.security.securityLevel}
                                                        </div>
                                                    )}
                                                </div>
                                                <div className="device-details">
                                                    <div className="device-info">
                                                        <span>IP Address:</span>
                                                        <span>{device.ip}</span>
                                                    </div>
                                                    <div className="device-info">
                                                        <span>Vendor:</span>
                                                        <span>{device.vendor}</span>
                                                    </div>
                                                    <div className="device-info">
                                                        <span>Open Ports:</span>
                                                        <span>{device.openPorts ? device.openPorts.length : 0}</span>
                                                    </div>
                                                    <div className="device-info">
                                                        <span>Risk Score:</span>
                                                        <span>{device.security ? `${device.security.riskScore}/100` : 'N/A'}</span>
                                                    </div>
                                                </div>
                                                {device.security && device.security.vulnerabilities.length > 0 && (
                                                    <div style={{marginTop: '15px', fontSize: '0.9rem', color: '#e53e3e'}}>
                                                        <strong>Key Issues:</strong> {device.security.vulnerabilities.slice(0, 2).join(', ')}
                                                        {device.security.vulnerabilities.length > 2 && '...'}
                                                    </div>
                                                )}
                                                <div style={{marginTop: '10px', fontSize: '0.8rem', color: '#64748b', fontStyle: 'italic'}}>
                                                    Click for detailed analysis →
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <div className="device-item">
                                            <div className="device-name">No devices found</div>
                                            <div style={{color: '#64748b', marginTop: '10px'}}>
                                                Run an enhanced security scan to discover devices and assess vulnerabilities.
                                            </div>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* Device Detail Page */}
                        <div className={`page ${currentPage === 'device-detail' ? 'active' : ''}`}>
                            {selectedDevice && (
                                <div className="device-detail-container">
                                    <div className="device-detail-header">
                                        <div>
                                            <h1 className="device-detail-title">
                                                {selectedDevice.hostname !== 'Unknown' ? selectedDevice.hostname : selectedDevice.ip}
                                            </h1>
                                            <div style={{fontSize: '1.2rem', color: '#64748b', marginTop: '5px'}}>
                                                {selectedDevice.vendor} • {selectedDevice.ip}
                                            </div>
                                        </div>
                                        <button 
                                            className="back-button"
                                            onClick={() => navigateToPage('devices')}
                                        >
                                            ← Back to Devices
                                        </button>
                                    </div>

                                    <div className="device-detail-grid">
                                        {/* Basic Information */}
                                        <div className="device-info-section">
                                            <h3 className="section-title">Basic Information</h3>
                                            <div className="info-row">
                                                <span className="info-label">IP Address:</span>
                                                <span className="info-value">{selectedDevice.ip}</span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Hostname:</span>
                                                <span className="info-value">{selectedDevice.hostname}</span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">MAC Address:</span>
                                                <span className="info-value">{selectedDevice.mac}</span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Vendor:</span>
                                                <span className="info-value">{selectedDevice.vendor}</span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Operating System:</span>
                                                <span className="info-value">{selectedDevice.osNmap}</span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Device Status:</span>
                                                <span className="info-value" style={{color: selectedDevice.state === 'up' ? '#38a169' : '#e53e3e'}}>
                                                    {selectedDevice.state.toUpperCase()}
                                                </span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Last Seen:</span>
                                                <span className="info-value">
                                                    {new Date(selectedDevice.lastSeen).toLocaleString()}
                                                </span>
                                            </div>
                                        </div>

                                        {/* Network Information */}
                                        <div className="device-info-section">
                                            <h3 className="section-title">Network Information</h3>
                                            <div className="info-row">
                                                <span className="info-label">Open Ports:</span>
                                                <span className="info-value">{selectedDevice.openPorts ? selectedDevice.openPorts.length : 0}</span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Security Level:</span>
                                                <span className="info-value">
                                                    <span className={`security-badge security-${selectedDevice.security?.securityLevel.toLowerCase()}`}>
                                                        {selectedDevice.security?.securityLevel || 'Unknown'}
                                                    </span>
                                                </span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Risk Score:</span>
                                                <span className="info-value" style={{fontWeight: '700', fontSize: '1.2rem'}}>
                                                    {selectedDevice.security?.riskScore || 0}/100
                                                </span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Vulnerabilities Found:</span>
                                                <span className="info-value" style={{color: '#e53e3e'}}>
                                                    {selectedDevice.security?.vulnerabilities.length || 0}
                                                </span>
                                            </div>
                                            <div className="info-row">
                                                <span className="info-label">Recommendations:</span>
                                                <span className="info-value" style={{color: '#38a169'}}>
                                                    {selectedDevice.security?.recommendations.length || 0}
                                                </span>
                                            </div>
                                        </div>

                                        {/* Security Assessment */}
                                        {selectedDevice.security && (
                                            <div className="security-detail-section">
                                                <h3 className="section-title">Security Assessment</h3>
                                                
                                                <div className="security-score-large">
                                                    <div className={`score-circle score-${selectedDevice.security.securityLevel.toLowerCase()}-bg`}>
                                                        {selectedDevice.security.riskScore}/100
                                                    </div>
                                                    <div className="score-info">
                                                        <div className={`score-level score-${selectedDevice.security.securityLevel.toLowerCase()}`}>
                                                            {selectedDevice.security.securityLevel} Risk
                                                        </div>
                                                        <div className="score-description">
                                                            {selectedDevice.security.securityLevel === 'Critical' && 
                                                                'This device poses a critical security risk and requires immediate attention.'}
                                                            {selectedDevice.security.securityLevel === 'High' && 
                                                                'This device has significant security vulnerabilities that should be addressed soon.'}
                                                            {selectedDevice.security.securityLevel === 'Medium' && 
                                                                'This device has moderate security concerns that should be reviewed.'}
                                                            {selectedDevice.security.securityLevel === 'Low' && 
                                                                'This device appears to have good security with minor issues.'}
                                                        </div>
                                                    </div>
                                                </div>

                                                {selectedDevice.security.vulnerabilities.length > 0 && (
                                                    <div>
                                                        <h4 style={{color: '#e53e3e', fontSize: '1.3rem', marginBottom: '15px'}}>
                                                            🚨 Security Vulnerabilities
                                                        </h4>
                                                        <ul className="vulnerability-detail-list">
                                                            {selectedDevice.security.vulnerabilities.map((vuln, index) => (
                                                                <li key={index} className="vulnerability-detail-item">
                                                                    {vuln}
                                                                </li>
                                                            ))}
                                                        </ul>
                                                    </div>
                                                )}

                                                {selectedDevice.security.recommendations.length > 0 && (
                                                    <div>
                                                        <h4 style={{color: '#38a169', fontSize: '1.3rem', marginBottom: '15px'}}>
                                                            ✅ Security Recommendations
                                                        </h4>
                                                        <ul className="recommendation-detail-list">
                                                            {selectedDevice.security.recommendations.map((rec, index) => (
                                                                <li key={index} className="recommendation-detail-item">
                                                                    {rec}
                                                                </li>
                                                            ))}
                                                        </ul>
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                    </div>

                                    {/* Open Ports Section */}
                                    {selectedDevice.openPorts && selectedDevice.openPorts.length > 0 && (
                                        <div className="ports-section">
                                            <h3 className="section-title">Open Ports & Services</h3>
                                            <div className="port-list">
                                                {selectedDevice.openPorts.map((port, index) => (
                                                    <div key={index} className="port-item">
                                                        <div className="port-number">{port.port}</div>
                                                        <div className="port-service">{port.service || 'Unknown Service'}</div>
                                                        <div className={`port-risk risk-${port.risk || 'low'}`}>
                                                            {(port.risk || 'low').toUpperCase()} RISK
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {/* No open ports message */}
                                    {(!selectedDevice.openPorts || selectedDevice.openPorts.length === 0) && (
                                        <div className="ports-section">
                                            <h3 className="section-title">Open Ports & Services</h3>
                                            <div style={{
                                                background: '#f0fff4', 
                                                border: '2px solid #9ae6b4', 
                                                borderRadius: '10px', 
                                                padding: '20px', 
                                                textAlign: 'center',
                                                color: '#38a169'
                                            }}>
                                                <div style={{fontSize: '2rem', marginBottom: '10px'}}>🔒</div>
                                                <div style={{fontSize: '1.2rem', fontWeight: '600'}}>No Open Ports Detected</div>
                                                <div style={{marginTop: '5px'}}>This device appears to have no accessible network services, which is good for security.</div>
                                            </div>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>

                        {/* Security Page */}
                        <div className={`page ${currentPage === 'security' ? 'active' : ''}`}>
                            <div className="security-container">
                                <h2 className="security-title">Network Security Assessment</h2>
                                
                                <div className="security-overview">
                                    <div className="security-score-card">
                                        <div className={`security-score ${networkSecurity ? getSecurityScoreClass(networkSecurity.score) : 'score-critical'}`}>
                                            {networkSecurity ? networkSecurity.score : 0}/100
                                        </div>
                                        <div className="security-status">
                                            {networkSecurity ? getSecurityStatusText(networkSecurity.score) : 'No Data'}
                                        </div>
                                    </div>
                                    
                                    {vulnerabilityStats && (
                                        <div className="stats-grid">
                                            <div className="stat-card">
                                                <div className="stat-number">{vulnerabilityStats.devicesNeedingAttention}</div>
                                                <div className="stat-label">Devices Need Attention</div>
                                            </div>
                                            <div className="stat-card">
                                                <div className="stat-number">{vulnerabilityStats.securityLevels.Critical}</div>
                                                <div className="stat-label">Critical Risks</div>
                                            </div>
                                            <div className="stat-card">
                                                <div className="stat-number">{vulnerabilityStats.averageRiskScore}</div>
                                                <div className="stat-label">Average Risk Score</div>
                                            </div>
                                        </div>
                                    )}
                                </div>

                                <div className="vulnerability-section">
                                    <div className="vulnerability-grid">
                                        <div className="vulnerability-card">
                                            <h3 className="vulnerability-title">Network Vulnerabilities</h3>
                                            <ul className="vulnerability-list">
                                                {networkSecurity && networkSecurity.recommendations.length > 0 ? (
                                                    networkSecurity.recommendations.map((vuln, index) => (
                                                        <li key={index} className="vulnerability-item">
                                                            {vuln}
                                                        </li>
                                                    ))
                                                ) : (
                                                    <li className="vulnerability-item">
                                                        Run a security scan to identify vulnerabilities
                                                    </li>
                                                )}
                                            </ul>
                                        </div>

                                        <div className="recommendation-card">
                                            <h3 className="vulnerability-title">Security Recommendations</h3>
                                            <ul className="vulnerability-list">
                                                {devices.length > 0 ? (
                                                    devices
                                                        .filter(d => d.security && d.security.recommendations.length > 0)
                                                        .slice(0, 5)
                                                        .map((device, index) => (
                                                            <li key={index} className="recommendation-item">
                                                                <strong>{device.hostname || device.ip}:</strong> {device.security.recommendations[0]}
                                                            </li>
                                                        ))
                                                ) : (
                                                    <li className="recommendation-item">
                                                        Complete a security scan for personalized recommendations
                                                    </li>
                                                )}
                                                
                                                <li className="recommendation-item">
                                                    Regularly update firmware on all network devices
                                                </li>
                                                <li className="recommendation-item">
                                                    Change default passwords on routers and IoT devices
                                                </li>
                                                <li className="recommendation-item">
                                                    Enable WPA3 encryption on wireless networks
                                                </li>
                                                <li className="recommendation-item">
                                                    Implement network segmentation for IoT devices
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DeviceScout />);
    </script>
</body>
</html>